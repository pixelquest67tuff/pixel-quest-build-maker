<!doctype html>
<html lang="en" class="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pixel Quest Build Maker</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-800 dark:bg-slate-900 dark:text-slate-200 min-h-screen p-6 transition-colors">
  <div class="max-w-5xl mx-auto">
    <header class="mb-6 flex justify-between items-center">
      <div>
        <h1 class="text-3xl font-semibold">Pixel Quest Build Maker</h1>
        <p class="text-sm text-slate-600 dark:text-slate-400">Pick quests, equip items, and share your build link.</p>
      </div>
      <button id="themeToggle" class="p-2 rounded border dark:border-slate-700">ðŸŒ™</button>
    </header>

    <main class="grid md:grid-cols-2 gap-6">
      <section>
        <div class="bg-white dark:bg-slate-800 rounded-xl shadow p-4">
          <h2 class="text-xl font-medium mb-3">Available Quests</h2>
          <div id="quests" class="space-y-3"></div>
        </div>

        <div class="bg-white dark:bg-slate-800 rounded-xl shadow p-4 mt-4">
          <h2 class="text-xl font-medium mb-3">Share / Load</h2>
          <div class="flex gap-2 mb-3">
            <button id="generateLink" class="px-3 py-2 rounded bg-indigo-600 text-white">Generate Link</button>
            <button id="copyLink" class="px-3 py-2 rounded border">Copy Link</button>
            <button id="clear" class="px-3 py-2 rounded border">Clear Build</button>
          </div>
          <input id="linkField" class="w-full rounded border p-2 text-sm dark:bg-slate-900" readonly />
          <p class="text-xs text-slate-500 mt-2">Who else watches skibidi toilet?</p>
        </div>
      </section>

      <section>
        <div class="bg-white dark:bg-slate-800 rounded-xl shadow p-4">
          <h2 class="text-xl font-medium mb-3">Your Build</h2>
          <div id="buildList" class="space-y-2 mb-3"></div>
          <div class="border-t border-slate-300 dark:border-slate-700 pt-3">
            <h3 class="font-medium">Total Stats</h3>
            <div id="totals" class="text-sm text-slate-700 dark:text-slate-300 mt-2"></div>
          </div>
        </div>

        <div class="bg-white dark:bg-slate-800 rounded-xl shadow p-4 mt-4">
          <h2 class="text-xl font-medium mb-3">Equipment</h2>
          <div class="grid grid-cols-2 gap-3" id="equipmentGrid"></div>
        </div>
      </section>
    </main>

    <footer class="text-xs text-slate-500 mt-6 dark:text-slate-400">Â© Pixel Quest Build Maker â€” Mooshroom Bomb, Mushroom Cap, Mushroom Bow</footer>
  </div>

<script>

const QUESTS = [
{id:'q01',title:'Beach Boss Slayer III',desc:'',rewards:[{stat:'Attack',amount:2},{stat:'Dexterity',amount:3}]},
{id:'q02',title:'Mermaid Cove Explorer',desc:'',rewards:[{stat:'Vitality',amount:3},{stat:'Dexterity',amount:2}]},
{id:'q03',title:'Mermaid Cove Speedrunner',desc:'',rewards:[{stat:'Speed',amount:5},{stat:'Defense',amount:2}]},
{id:'q04',title:'Bandit Beater',desc:'',rewards:[{stat:'Max Health',amount:25},{stat:'Max Mana',amount:25}]},
{id:'q05',title:'Pirate Island Victory II',desc:'',rewards:[{stat:'Max Health',amount:10},{stat:'Attack',amount:2}]},
{id:'q06',title:'Pirate Island Speedrunner',desc:'',rewards:[{stat:'Speed',amount:3},{stat:'Dexterity',amount:5}]},
{id:'q07',title:'Woodland Boss Slayer III',desc:'',rewards:[{stat:'Vitality',amount:8},{stat:'Attack',amount:4}]},
{id:'q08',title:'Into the Thick of it!',desc:'',rewards:[{stat:'Max Mana',amount:25},{stat:'Max Health',amount:10}]},
{id:'q09',title:'Wooded Thicket Victory II',desc:'',rewards:[{stat:'Attack',amount:5},{stat:'Dexterity',amount:8}]},
{id:'q10',title:'Wooded Thicket Speedrunner',desc:'',rewards:[{stat:'Speed',amount:5},{stat:'Defense',amount:3}]},
{id:'q11',title:'Woodlands Ruins Victory I',desc:'',rewards:[{stat:'Max Health',amount:25},{stat:'Speed',amount:5}]},
{id:'q12',title:'Woodlands Ruins Victory II',desc:'',rewards:[{stat:'Speed',amount:5},{stat:'Dexterity',amount:5}]},
{id:'q13',title:'Mushroom Den Explorer I',desc:'',rewards:[{stat:'Vitality',amount:3},{stat:'Dexterity',amount:6}]},
{id:'q14',title:'Mushroom Den Explorer II',desc:'',rewards:[{stat:'Max Mana',amount:25},{stat:'Wisdom',amount:8}]},
{id:'q15',title:'Mushroom Den Explorer III',desc:'',rewards:[{stat:'Vitality',amount:3},{stat:'Dexterity',amount:2}]},
{id:'q16',title:'Mushroom Den Speedrunner',desc:'',rewards:[{stat:'Attack',amount:7},{stat:'Defense',amount:2}]},
{id:'q17',title:'The Bog Speedrunner I',desc:'',rewards:[{stat:'Speed',amount:5},{stat:'Attack',amount:2}]},
{id:'q18',title:'The Bog Speedrunner II',desc:'',rewards:[{stat:'Vitality',amount:5},{stat:'Wisdom',amount:5}]},
{id:'q19',title:'The Bog Speedrunner III',desc:'',rewards:[{stat:'Speed',amount:5},{stat:'Attack',amount:5}]},
{id:'q20',title:'Bog Gator Brawl',desc:'',rewards:[{stat:'Vitality',amount:3},{stat:'Dexterity',amount:2}]},
{id:'q21',title:'Curse of the Bog',desc:'',rewards:[{stat:'Max Health',amount:30},{stat:'Dexterity',amount:8}]},
{id:'q22',title:'Catacombs Explorer II',desc:'',rewards:[{stat:'Vitality',amount:5},{stat:'Speed',amount:6}]},
{id:'q23',title:'Catacombs Speedrunner',desc:'',rewards:[{stat:'Defense',amount:3},{stat:'Dexterity',amount:6}]},
{id:'q24',title:'Worm Nest Explorer I',desc:'',rewards:[{stat:'Wisdom',amount:5},{stat:'Max Mana',amount:25}]},
{id:'q25',title:'Worm Nest Speedrunner',desc:'',rewards:[{stat:'Defense',amount:3},{stat:'Attack',amount:8}]},
{id:'q26',title:'Bounty: Snow Kings',desc:'',rewards:[{stat:'Attack',amount:6},{stat:'Vitality',amount:2}]},
{id:'q27',title:'Bounty: Snow Goblins',desc:'',rewards:[{stat:'Wisdom',amount:6},{stat:'Vitality',amount:3}]},
{id:'q28',title:'Ice Forest Speedrunner',desc:'',rewards:[{stat:'Attack',amount:5},{stat:'Defense',amount:2}]},
{id:'q29',title:'Snow Forest Protector',desc:'',rewards:[{stat:'Max Mana',amount:20},{stat:'Max Health',amount:10}]},
{id:'q30',title:'Ice Forest Victory',desc:'',rewards:[{stat:'Attack',amount:5},{stat:'Dexterity',amount:3}]},
{id:'q31',title:'Ice Forest Explorer',desc:'',rewards:[{stat:'Max Mana',amount:35},{stat:'Defense',amount:2}]},
{id:'q32',title:'Arctic Palace Speedrunner',desc:'',rewards:[{stat:'Speed',amount:5},{stat:'Defense',amount:3}]}
];
// too lazy too add screw you
const ITEMS = [
  {id:'placeholder',slot:'Weapon',type:'Bow',name:'Placeholder',stats:{rateOfFire:0.75,armorPen:25,shotsPerAttack:1,range:8,valorBonus:15,Attack:10,Dexterity:5},
];

let build = [];
let equipment = {Weapon:null,Ability:null,Armor:null,Accessory:null};

function renderQuests(){
  const c = document.getElementById('quests');
  c.innerHTML = '';
  QUESTS.forEach(q => {
    const el = document.createElement('div');
    el.className = 'p-3 border rounded-md bg-slate-50 dark:bg-slate-700';
    el.innerHTML = `
      <div class="font-medium">${q.title}</div>
      <div class="mt-2 flex gap-2">
        ${q.rewards.map((r,i)=>`<button class='chooseBtn px-2 py-1 border rounded text-sm' data-qid='${q.id}' data-choice='${i}'>${r.stat} +${r.amount}</button>`).join('')}
      </div>
    `;
    c.appendChild(el);
  });
  document.querySelectorAll('.chooseBtn').forEach(b=>b.onclick = () => addToBuild(b.dataset.qid, Number(b.dataset.choice)));
}

function renderBuild(){
  const b = document.getElementById('buildList');
  b.innerHTML = '';
  if(!build.length){ b.innerHTML = '<div class="text-slate-500">No quests selected.</div>'; }
  build.forEach(item => {
    const q = QUESTS.find(x=>x.id===item.questId);
    const r = q.rewards[item.choiceIndex];
    const div = document.createElement('div');
    div.className = 'flex justify-between items-center p-2 border rounded';
    div.innerHTML = `<div><div class='font-medium'>${q.title}</div><div class='text-xs'>${r.stat} +${r.amount}</div></div><button class='border rounded px-2 py-1 text-xs' onclick='removeFromBuild("${item.id}")'>Remove</button>`;
    b.appendChild(div);
  });
  renderTotals();
}

function renderEquipment(){
  const g = document.getElementById('equipmentGrid');
  g.innerHTML = '';
  ['Weapon','Ability','Armor','Accessory'].forEach(slot => {
    const e = equipment[slot];
    const div = document.createElement('div');
    div.className = 'p-3 border rounded text-sm cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700';
    div.innerHTML = `<div class='font-semibold'>${slot}</div><div class='text-xs text-slate-500 dark:text-slate-400'>${e?e.name+' ('+e.tier+')':'Empty'}</div>`;
    div.onclick = () => selectItem(slot);
    g.appendChild(div);
  });
}

function addToBuild(questId, choiceIndex){
  if(build.some(x=>x.questId===questId)){ alert('Quest already picked'); return; }
  build.push({ id: cryptoId(), questId, choiceIndex });
  renderBuild();
  updateLink();
}

function removeFromBuild(id){ build = build.filter(x=>x.id!==id); renderBuild(); updateLink(); }

function selectItem(slot){
  const pool = ITEMS.filter(i=>i.slot===slot);
  const choice = prompt('Select '+slot+' by name:\n'+pool.map(i=>i.name+' ('+i.tier+')').join('\n'));
  const item = pool.find(i=>i.name.toLowerCase()=== (choice||'').toLowerCase());
  if(!item){ alert('Invalid item'); return; }
  equipment[slot] = item;
  renderEquipment(); renderTotals(); updateLink();
}

function renderTotals(){
  const totals = {};
  build.forEach(i=>{
    const q = QUESTS.find(x=>x.id===i.questId);
    const r = q.rewards[i.choiceIndex];
    totals[r.stat] = (totals[r.stat]||0) + r.amount;
  });
  Object.values(equipment).forEach(it=>{
    if(!it) return;
    for(const [k,v] of Object.entries(it.stats || {})){
      if(['Attack','Defense','Speed','Wisdom','Dexterity','Vitality'].includes(k)){
        totals[k] = (totals[k]||0) + v;
      }
    }
  });
  const t = document.getElementById('totals');
  if(!Object.keys(totals).length){ t.innerHTML = '<div class="text-slate-500">No stats yet.</div>'; return; }
  t.innerHTML = Object.keys(totals).map(s=>`<div>${s}: <strong>${totals[s]}</strong></div>`).join('');
}

function encodeData(){
  try{
    const equipmentIds = Object.fromEntries(
      Object.entries(equipment).map(([s, i]) => [s, i ? i.id : null])
    );
    const payload = { build, equipmentIds };
    return btoa(encodeURIComponent(JSON.stringify(payload)));
  }catch(e){
    console.error('encodeData error', e);
    return '';
  }
}

function decodeData(s){
  try{
    return JSON.parse(decodeURIComponent(atob(s)));
  }catch(e){
    console.error('decodeData error', e);
    return null;
  }
}

function updateLink(){
  const f = document.getElementById('linkField');
  const hasData = build.length || Object.values(equipment).some(x=>x);
  if(!hasData){ f.value = ''; return; }
  const encoded = encodeData();
  f.value = location.origin + location.pathname + '#data=' + encoded;
}

function loadFromFragment(){
  const m = location.hash.match(/data=([^&]+)/);
  if(!m) return;
  const d = decodeData(m[1]);
  if(!d) return;
  build = d.build || [];
  if(d.equipmentIds){
    for(const [s,id] of Object.entries(d.equipmentIds)){
      equipment[s] = ITEMS.find(i=>i.id===id) || null;
    }
  }
}

function clearAll(){ if(!confirm('Clear build?')) return; build = []; equipment = {Weapon:null,Ability:null,Armor:null,Accessory:null}; updateLink(); renderBuild(); renderEquipment(); }

function cryptoId(){ return 'id-'+Math.random().toString(36).slice(2,9); }

function initTheme(){ const t = localStorage.getItem('theme') || 'light'; if(t === 'dark'){ document.documentElement.classList.add('dark'); } }
function toggleTheme(){ document.documentElement.classList.toggle('dark'); localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light'); }

window.addEventListener('DOMContentLoaded', ()=>{
  initTheme();
  renderQuests();
  loadFromFragment();
  renderBuild();
  renderEquipment();
  document.getElementById('generateLink').onclick = updateLink;
  document.getElementById('copyLink').onclick = ()=>{ const f = document.getElementById('linkField'); f.select(); document.execCommand('copy'); alert('Link copied.'); };
  document.getElementById('clear').onclick = clearAll;
  document.getElementById('themeToggle').onclick = toggleTheme;
});
</script>
</body>
</html>

